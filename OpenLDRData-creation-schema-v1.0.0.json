IF EXISTS(select * from sys.databases where name='OpenLDRData')
BEGIN
	EXEC msdb.dbo.sp_delete_database_backuphistory @database_name = N'OpenLDRData'
	ALTER DATABASE [OpenLDRData] SET  SINGLE_USER WITH ROLLBACK IMMEDIATE
	DROP DATABASE [OpenLDRData]
END
GO

CREATE DATABASE [OpenLDRData] 
COLLATE SQL_Latin1_General_CP1_CI_AS;
GO

GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[LabResults]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[LabResults](
	[DateTimeStamp] [datetime] NULL,
	[Versionstamp] [varchar](30) NULL,
	[LIMSDateTimeStamp] [datetime] NULL,
	[LIMSVersionStamp] [varchar](30) NULL,
	[RequestID] [varchar](26) NULL,
	[OBRSetID] [int] NULL,
	[OBXSetID] [int] NULL,
	[OBXSubID] [int] NULL,
	[LOINCCode] [varchar](30) NULL,
	[HL7ResultTypeCode] [varchar](2) NULL,
	[SIValue] [float] NULL,
	[SIUnits] [varchar](25) NULL,
	[SILoRange] [float] NULL,
	[SIHiRange] [float] NULL,
	[HL7AbnormalFlagCodes] [varchar](5) NULL,
	[DateTimeValue] [datetime] NULL,
	[CodedValue] [varchar](1) NULL,
	[ResultSemiquantitive] [int] NULL,
	[Note] [bit] NULL,
	[LIMSObservationCode] [varchar](10) NULL,
	[LIMSObservationDesc] [varchar](50) NULL,
	[LIMSRptResult] [varchar](80) NULL,
	[LIMSRptUnits] [varchar](25) NULL,
	[LIMSRptFlag] [varchar](25) NULL,
	[LIMSRptRange] [varchar](25) NULL,
	[LIMSCodedValue] [varchar](5) NULL,
	[WorkUnits] [float] NULL,
	[CostUnits] [float] NULL
) ON [PRIMARY]
END
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Monitoring]    Script Date: 8/14/2019 1:46:00 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Monitoring]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Monitoring](
	[DateTimeStamp] [datetime] NULL,
	[Versionstamp] [varchar](30) NULL,
	[LIMSDateTimeStamp] [datetime] NULL,
	[LIMSVersionstamp] [varchar](30) NULL,
	[RequestID] [varchar](26) NULL,
	[OBRSetID] [int] NULL,
	[OBXSetID] [int] NULL,
	[OBXSubID] [int] NULL,
	[LOINCCode] [varchar](30) NULL,
	[ORGANISM] [varchar](50) NULL,
	[SurveillanceCode] [varchar](5) NULL,
	[SpecimenDateTime] [datetime] NULL,
	[LIMSObservationCode] [varchar](25) NULL,
	[LIMSObservationDesc] [varchar](50) NULL,
	[LIMSOrganismGroup] [varchar](25) NULL,
	[CodedValue] [varchar](1) NULL,
	[ResultSemiquantitive] [int] NULL,
	[ResultNotConfirmed] [bit] NULL,
	[ResistantDrugs] [varchar](250) NULL,
	[IntermediateDrugs] [varchar](250) NULL,
	[SensitiveDrugs] [varchar](250) NULL,
	[MDRCode] [char](1) NULL
) ON [PRIMARY]
END
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Patients]    Script Date: 8/14/2019 1:46:00 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Patients]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Patients](
	[DateTimeStamp] [datetime] NULL,
	[Versionstamp] [varchar](30) NULL,
	[LIMSDateTimeStamp] [datetime] NULL,
	[LIMSVersionStamp] [varchar](30) NULL,
	[RequestID] [varchar](26) NULL,
	[REFNO] [varchar](56) NULL,
	[REGISTEREDDATE] [datetime] NULL,
	[LOCATION] [varchar](5) NULL,
	[WARD] [varchar](5) NULL,
	[HOSPID] [varchar](26) NULL,
	[NATIONALITY] [varchar](5) NULL,
	[NATIONALID] [varchar](26) NULL,
	[UNIQUEID] [varchar](31) NULL,
	[SURNAME] [varchar](31) NULL,
	[FIRSTNAME] [varchar](31) NULL,
	[INITIALS] [varchar](16) NULL,
	[REFDRCODE] [varchar](5) NULL,
	[REFDR] [varchar](41) NULL,
	[MEDAID] [varchar](5) NULL,
	[MEDAIDNO] [varchar](26) NULL,
	[BILLACCNO] [varchar](23) NULL,
	[TELHOME] [varchar](20) NULL,
	[TELWORK] [varchar](20) NULL,
	[MOBILE] [varchar](20) NULL,
	[EMAIL] [varchar](60) NULL,
	[DOB] [date] NULL,
	[DOBType] [varchar](25) NULL
) ON [PRIMARY]
END
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Requests]    Script Date: 8/14/2019 1:46:00 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Requests]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Requests](
	[DateTimeStamp] [datetime] NULL,
	[Versionstamp] [varchar](30) NULL,
	[LIMSDateTimeStamp] [datetime] NULL,
	[LIMSVersionstamp] [varchar](30) NULL,
	[RequestID] [varchar](26) NULL,
	[OBRSetID] [int] NULL,
	[LOINCPanelCode] [varchar](10) NULL,
	[LIMSPanelCode] [varchar](10) NULL,
	[LIMSPanelDesc] [varchar](50) NULL,
	[HL7PriorityCode] [char](1) NULL,
	[SpecimenDateTime] [datetime] NULL,
	[RegisteredDateTime] [datetime] NULL,
	[ReceivedDateTime] [datetime] NULL,
	[AnalysisDateTime] [datetime] NULL,
	[AuthorisedDateTime] [datetime] NULL,
	[AdmitAttendDateTime] [datetime] NULL,
	[CollectionVolume] [float] NULL,
	[RequestingFacilityCode] [varchar](15) NULL,
	[ReceivingFacilityCode] [varchar](10) NULL,
	[LIMSPointOfCareDesc] [varchar](50) NULL,
	[RequestTypeCode] [varchar](3) NULL,
	[ICD10ClinicalInfoCodes] [varchar](50) NULL,
	[ClinicalInfo] [varchar](250) NULL,
	[HL7SpecimenSourceCode] [varchar](10) NULL,
	[LIMSSpecimenSourceCode] [varchar](10) NULL,
	[LIMSSpecimenSourceDesc] [varchar](50) NULL,
	[HL7SpecimenSiteCode] [varchar](10) NULL,
	[LIMSSpecimenSiteCode] [varchar](10) NULL,
	[LIMSSpecimenSiteDesc] [varchar](50) NULL,
	[WorkUnits] [float] NULL,
	[CostUnits] [float] NULL,
	[HL7SectionCode] [varchar](3) NULL,
	[HL7ResultStatusCode] [char](1) NULL,
	[RegisteredBy] [varchar](250) NULL,
	[TestedBy] [varchar](250) NULL,
	[AuthorisedBy] [varchar](250) NULL,
	[OrderingNotes] [varchar](250) NULL,
	[EncryptedPatientID] [nvarchar](64) NULL,
	[AgeInYears] [int] NULL,
	[AgeInDays] [int] NULL,
	[HL7SexCode] [char](1) NULL,
	[HL7EthnicGroupCode] [char](3) NULL,
	[Deceased] [bit] NULL,
	[Newborn] [bit] NULL,
	[HL7PatientClassCode] [char](1) NULL,
	[AttendingDoctor] [varchar](50) NULL,
	[TestingFacilityCode] [varchar](10) NULL,
	[ReferringRequestID] [varchar](25) NULL,
	[Therapy] [varchar](250) NULL,
	[LIMSAnalyzerCode] [varchar](10) NULL,
	[TargetTimeDays] [int] NULL,
	[TargetTimeMins] [int] NULL,
	[LIMSRejectionCode] [varchar](10) NULL,
	[LIMSRejectionDesc] [varchar](250) NULL,
	[LIMSFacilityCode] [varchar](15) NULL,
	[Repeated] [tinyint] NULL,
	[LIMSSpecimenID] [nvarchar](64) NULL,
	[LIMSPreReg_RegistrationDateTime] [datetime] NULL,
	[LIMSPreReg_ReceivedDateTime] [datetime] NULL,
	[LIMSPreReg_RegistrationFacilityCode] [varchar](15) NULL,
	[LIMSVendorCode] [varchar](4) NULL,
	[RequestingFacilityNationalCode] [varchar](15) NULL
) ON [PRIMARY]
END
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[VersionControl]    Script Date: 8/14/2019 1:46:00 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[VersionControl]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[VersionControl](
	[DateTimeStamp] [datetime] NULL,
	[VersionActivationDate] [datetime] NULL,
	[VERBase] [int] NULL,
	[VERUpdate] [int] NULL,
	[VERBuild] [int] NULL,
	[VersionStamp] [varchar](20) NULL
) ON [PRIMARY]
END
GO
SET ANSI_PADDING OFF
GO
